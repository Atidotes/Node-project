{"version":3,"file":"js/837.a4c14f88.js","mappings":"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","sources":["webpack://admin/./src/views/NewsManage/newsAdd.vue","webpack://admin/./src/views/NewsManage/newsAdd.vue?67bf"],"sourcesContent":["import \"core-js/modules/es.array.push.js\";\nimport { resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createBlock as _createBlock, createTextVNode as _createTextVNode } from \"vue\";\nimport { reactive, ref } from \"vue\";\nimport uploads from \"../../components/Upload/upload.vue\";\nimport editor from \"../../components/Editor/editor.vue\";\nimport { upload } from \"../../api/publicApi\";\nimport { useRouter } from \"vue-router\";\n\nimport { ElMessage } from 'element-plus/es';\nimport 'element-plus/es/components/base/style/css';\nimport 'element-plus/es/components/message/style/css';\nexport default {\n  __name: 'newsAdd',\n  setup(__props) {\n    const ruleFormRef = ref(\"\");\n    const router = useRouter();\n\n    /**\r\n     * 表单数据\r\n     */\n    const ruleForm = reactive({\n      title: null,\n      content: null,\n      category: null,\n      // 最新动态1 典型案例2 通知公告3\n      cover: null,\n      file: null,\n      isPublish: 0 // 未发布0 已发布1\n    });\n\n    /**\r\n     * 选择器数据\r\n     */\n    const options = reactive([{\n      value: 1,\n      label: \"最新动态\"\n    }, {\n      value: 2,\n      label: \"典型案例\"\n    }, {\n      value: 3,\n      label: \"通知公告\"\n    }]);\n\n    /**\r\n     * 表单验证规则\r\n     */\n    const rules = reactive({\n      title: [{\n        required: true,\n        message: \"请输入标题！\",\n        trigger: \"blur\"\n      }, {\n        min: 5,\n        max: 20,\n        message: \"标题长度为5~20个字符\",\n        trigger: \"change\"\n      }],\n      content: [{\n        required: true,\n        message: \"请输入内容！\",\n        trigger: \"blur\"\n      }],\n      category: [{\n        required: true,\n        message: \"请选择类别！\",\n        trigger: \"blur\"\n      }],\n      cover: [{\n        required: true,\n        message: \"请上传封面！\",\n        trigger: \"blur\"\n      }]\n    });\n\n    /**\r\n     * 上传图片变化\r\n     */\n    const changeUpload = file => {\n      ruleForm.cover = URL.createObjectURL(file);\n      ruleForm.file = file;\n    };\n\n    /**\r\n     * 保存数据\r\n     */\n    const btn = () => {\n      ruleFormRef.value.validate(async valid => {\n        if (valid) {\n          const params = new FormData();\n          for (let item in ruleForm) {\n            params.append(item, ruleForm[item]);\n          }\n          let result = await upload('/new/add', params);\n          if (result.code === 200 && result.success) {\n            router.push(\"/news-list\");\n            ElMessage({\n              type: \"success\",\n              message: result.message\n            });\n          } else {\n            ElMessage({\n              type: \"error\",\n              message: \"发布失败\"\n            });\n          }\n        }\n      });\n    };\n    return (_ctx, _cache) => {\n      const _component_el_page_header = _resolveComponent(\"el-page-header\");\n      const _component_el_input = _resolveComponent(\"el-input\");\n      const _component_el_form_item = _resolveComponent(\"el-form-item\");\n      const _component_el_option = _resolveComponent(\"el-option\");\n      const _component_el_select = _resolveComponent(\"el-select\");\n      const _component_el_button = _resolveComponent(\"el-button\");\n      const _component_el_form = _resolveComponent(\"el-form\");\n      return _openBlock(), _createElementBlock(_Fragment, null, [_createVNode(_component_el_page_header, {\n        icon: null,\n        title: \"新闻管理\",\n        content: \"添加新闻\"\n      }), _createVNode(_component_el_form, {\n        ref_key: \"ruleFormRef\",\n        ref: ruleFormRef,\n        model: ruleForm,\n        \"status-icon\": \"\",\n        rules: rules,\n        \"label-width\": \"85px\",\n        class: \"ruleForm\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_form_item, {\n          label: \"标题\",\n          prop: \"title\"\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_input, {\n            modelValue: ruleForm.title,\n            \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => ruleForm.title = $event),\n            type: \"text\",\n            placeholder: \"请输入标题\",\n            autocomplete: \"off\"\n          }, null, 8, [\"modelValue\"])]),\n          _: 1\n        }), _createVNode(_component_el_form_item, {\n          label: \"内容\",\n          prop: \"content\"\n        }, {\n          default: _withCtx(() => [_createVNode(editor, {\n            modelValue: ruleForm.content,\n            \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => ruleForm.content = $event)\n          }, null, 8, [\"modelValue\"])]),\n          _: 1\n        }), _createVNode(_component_el_form_item, {\n          label: \"类别\",\n          prop: \"category\"\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_select, {\n            modelValue: ruleForm.category,\n            \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => ruleForm.category = $event),\n            placeholder: \"请选择类别\"\n          }, {\n            default: _withCtx(() => [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(options, item => {\n              return _openBlock(), _createBlock(_component_el_option, {\n                key: item.value,\n                label: item.label,\n                value: item.value\n              }, null, 8, [\"label\", \"value\"]);\n            }), 128))]),\n            _: 1\n          }, 8, [\"modelValue\"])]),\n          _: 1\n        }), _createVNode(_component_el_form_item, {\n          label: \"封面图片\",\n          prop: \"cover\"\n        }, {\n          default: _withCtx(() => [_createVNode(uploads, {\n            avatar: ruleForm.cover,\n            onUpload: changeUpload\n          }, null, 8, [\"avatar\"])]),\n          _: 1\n        }), _createVNode(_component_el_button, {\n          type: \"primary\",\n          onClick: btn\n        }, {\n          default: _withCtx(() => [_createTextVNode(\"添加新闻\")]),\n          _: 1\n        })]),\n        _: 1\n      }, 8, [\"model\", \"rules\"])], 64);\n    };\n  }\n};","/* unplugin-vue-components disabled */import script from \"./newsAdd.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./newsAdd.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./newsAdd.vue?vue&type=style&index=0&id=e5e3682e&lang=scss&scoped=true\"\n\nimport exportComponent from \"D:\\\\node\\\\admin\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-e5e3682e\"]])\n\nexport default __exports__"],"names":["__name","setup","__props","ruleFormRef","router","ruleForm","title","content","category","cover","file","isPublish","options","value","label","rules","required","message","trigger","min","max","changeUpload","URL","createObjectURL","btn","validate","async","valid","params","FormData","item","append","result","code","success","push","type","_ctx","_cache","_component_el_page_header","_component_el_input","_component_el_form_item","_component_el_option","_component_el_select","_component_el_button","_component_el_form","icon","ref_key","ref","model","class","default","prop","modelValue","$event","placeholder","autocomplete","_","editor","key","upload","avatar","onUpload","onClick","__exports__"],"sourceRoot":""}