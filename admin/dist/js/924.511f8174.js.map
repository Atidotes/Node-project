{"version":3,"file":"js/924.511f8174.js","mappings":"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","sources":["webpack://admin/./src/api/newApi.js","webpack://admin/./src/views/NewsManage/newsEdit.vue","webpack://admin/./src/views/NewsManage/newsEdit.vue?c731"],"sourcesContent":["import requests from \"@/util/axios.config\";\r\n\r\n/** 获取新闻列表 */\r\nexport const newList = () => requests({ method: 'GET', url: '/new/list' })\r\n\r\n/** 改变发布状态 */\r\nexport const newSwitch = (data) => requests({ method: 'PUT', url: '/new/publish', data })\r\n\r\n/** 删除新闻 */\r\nexport const deleteNew = (id) =>requests({method:'DELETE',url:`/new/list/${id}`,})\r\n\r\n/** 获取新闻信息 */\r\nexport const newInfo = (id) => requests({method:'GET',url:`/new/list/${id}`})\r\n","import \"core-js/modules/es.array.push.js\";\nimport { resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createBlock as _createBlock, createTextVNode as _createTextVNode } from \"vue\";\nimport { onMounted, reactive, ref } from \"vue\";\nimport uploads from \"../../components/Upload/upload.vue\";\nimport editor from \"../../components/Editor/editor.vue\";\nimport { upload } from \"../../api/publicApi\";\nimport { useRoute, useRouter } from \"vue-router\";\nimport { newInfo } from \"../../api/newApi\";\n\nimport { ElMessage } from 'element-plus/es';\nimport 'element-plus/es/components/base/style/css';\nimport 'element-plus/es/components/message/style/css';\nexport default {\n  __name: 'newsEdit',\n  setup(__props) {\n    const ruleFormRef = ref(\"\");\n    const router = useRouter();\n    const route = useRoute();\n    onMounted(() => {\n      getData();\n    });\n\n    /**\r\n     * 表单数据\r\n     */\n    const ruleForm = reactive({\n      title: null,\n      content: null,\n      category: null,\n      // 最新动态1 典型案例2 通知公告3\n      cover: null,\n      file: null,\n      isPublish: 0 // 未发布0 已发布1\n    });\n\n    /**\r\n     * 选择器数据\r\n     */\n    const options = reactive([{\n      value: 1,\n      label: \"最新动态\"\n    }, {\n      value: 2,\n      label: \"典型案例\"\n    }, {\n      value: 3,\n      label: \"通知公告\"\n    }]);\n\n    /**\r\n     * 表单验证规则\r\n     */\n    const rules = reactive({\n      title: [{\n        required: true,\n        message: \"请输入标题！\",\n        trigger: \"blur\"\n      }, {\n        min: 5,\n        max: 20,\n        message: \"标题长度为5~20个字符\",\n        trigger: \"change\"\n      }],\n      content: [{\n        required: true,\n        message: \"请输入内容！\",\n        trigger: \"blur\"\n      }],\n      category: [{\n        required: true,\n        message: \"请选择类别！\",\n        trigger: \"blur\"\n      }],\n      cover: [{\n        required: true,\n        message: \"请上传封面！\",\n        trigger: \"blur\"\n      }]\n    });\n\n    /**\r\n     * 获取表单数据\r\n     */\n    const getData = async () => {\n      let result = await newInfo(route.params.id);\n      if (result.code === 200 && result.success) {\n        Object.assign(ruleForm, result.data);\n      } else {\n        ElMessage({\n          type: 'error',\n          message: '数据加载失败'\n        });\n      }\n    };\n\n    /**\r\n     * 返回路由\r\n     */\n    const handleBack = () => {\n      router.back();\n    };\n\n    /**\r\n     * 上传图片变化\r\n     */\n    const changeUpload = file => {\n      ruleForm.cover = URL.createObjectURL(file);\n      ruleForm.file = file;\n    };\n\n    /**\r\n     * 保存数据\r\n     */\n    const btn = () => {\n      ruleFormRef.value.validate(async valid => {\n        if (valid) {\n          const params = new FormData();\n          for (let item in ruleForm) {\n            params.append(item, ruleForm[item]);\n          }\n          let result = await upload(\"/new/revise\", params);\n          if (result.code === 200 && result.success) {\n            router.push(\"/news-list\");\n            ElMessage({\n              type: \"success\",\n              message: result.message\n            });\n          } else {\n            ElMessage({\n              type: \"error\",\n              message: \"发布失败\"\n            });\n          }\n        }\n      });\n    };\n    return (_ctx, _cache) => {\n      const _component_el_page_header = _resolveComponent(\"el-page-header\");\n      const _component_el_input = _resolveComponent(\"el-input\");\n      const _component_el_form_item = _resolveComponent(\"el-form-item\");\n      const _component_el_option = _resolveComponent(\"el-option\");\n      const _component_el_select = _resolveComponent(\"el-select\");\n      const _component_el_button = _resolveComponent(\"el-button\");\n      const _component_el_form = _resolveComponent(\"el-form\");\n      return _openBlock(), _createElementBlock(_Fragment, null, [_createVNode(_component_el_page_header, {\n        title: \"新闻管理\",\n        content: \"修改新闻\",\n        onBack: handleBack\n      }), _createVNode(_component_el_form, {\n        ref_key: \"ruleFormRef\",\n        ref: ruleFormRef,\n        model: ruleForm,\n        \"status-icon\": \"\",\n        rules: rules,\n        \"label-width\": \"85px\",\n        class: \"ruleForm\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_form_item, {\n          label: \"标题\",\n          prop: \"title\"\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_input, {\n            modelValue: ruleForm.title,\n            \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => ruleForm.title = $event),\n            type: \"text\",\n            placeholder: \"请输入标题\",\n            autocomplete: \"off\"\n          }, null, 8, [\"modelValue\"])]),\n          _: 1\n        }), _createVNode(_component_el_form_item, {\n          label: \"内容\",\n          prop: \"content\"\n        }, {\n          default: _withCtx(() => [_createVNode(editor, {\n            modelValue: ruleForm.content,\n            \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => ruleForm.content = $event)\n          }, null, 8, [\"modelValue\"])]),\n          _: 1\n        }), _createVNode(_component_el_form_item, {\n          label: \"类别\",\n          prop: \"category\"\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_select, {\n            modelValue: ruleForm.category,\n            \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => ruleForm.category = $event),\n            placeholder: \"请选择类别\"\n          }, {\n            default: _withCtx(() => [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(options, item => {\n              return _openBlock(), _createBlock(_component_el_option, {\n                key: item.value,\n                label: item.label,\n                value: item.value\n              }, null, 8, [\"label\", \"value\"]);\n            }), 128))]),\n            _: 1\n          }, 8, [\"modelValue\"])]),\n          _: 1\n        }), _createVNode(_component_el_form_item, {\n          label: \"封面图片\",\n          prop: \"cover\"\n        }, {\n          default: _withCtx(() => [_createVNode(uploads, {\n            avatar: ruleForm.cover,\n            onUpload: changeUpload\n          }, null, 8, [\"avatar\"])]),\n          _: 1\n        }), _createVNode(_component_el_button, {\n          type: \"primary\",\n          onClick: btn\n        }, {\n          default: _withCtx(() => [_createTextVNode(\"修改新闻\")]),\n          _: 1\n        })]),\n        _: 1\n      }, 8, [\"model\", \"rules\"])], 64);\n    };\n  }\n};","/* unplugin-vue-components disabled */import script from \"./newsEdit.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./newsEdit.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./newsEdit.vue?vue&type=style&index=0&id=04dbc8f0&lang=scss&scoped=true\"\n\nimport exportComponent from \"D:\\\\node\\\\admin\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-04dbc8f0\"]])\n\nexport default __exports__"],"names":["newList","requests","method","url","newSwitch","data","deleteNew","id","newInfo","__name","setup","__props","ruleFormRef","router","route","getData","ruleForm","title","content","category","cover","file","isPublish","options","value","label","rules","required","message","trigger","min","max","async","result","params","code","success","Object","assign","type","handleBack","back","changeUpload","URL","createObjectURL","btn","validate","valid","FormData","item","append","push","_ctx","_cache","_component_el_page_header","_component_el_input","_component_el_form_item","_component_el_option","_component_el_select","_component_el_button","_component_el_form","onBack","ref_key","ref","model","class","default","prop","modelValue","$event","placeholder","autocomplete","_","editor","key","upload","avatar","onUpload","onClick","__exports__"],"sourceRoot":""}