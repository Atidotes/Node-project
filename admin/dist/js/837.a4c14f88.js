"use strict";(self["webpackChunkadmin"]=self["webpackChunkadmin"]||[]).push([[837],{3837:function(e,l,a){a.r(l),a.d(l,{default:function(){return w}});var t=a(2913),r=(a(1758),a(2064),a(6465)),u=(a(6809),a(438)),o=(a(3877),a(7960),a(7113),a(9866)),n=(a(172),a(8135)),s=(a(4115),a(7658),a(3396)),c=a(4870),d=a(6121),m=a(4715),i=a(8783),p=a(2483),g=a(1565),f=(a(7228),{__name:"newsAdd",setup(e){const l=(0,c.iH)(""),a=(0,p.tv)(),f=(0,c.qj)({title:null,content:null,category:null,cover:null,file:null,isPublish:0}),v=(0,c.qj)([{value:1,label:"最新动态"},{value:2,label:"典型案例"},{value:3,label:"通知公告"}]),b=(0,c.qj)({title:[{required:!0,message:"请输入标题！",trigger:"blur"},{min:5,max:20,message:"标题长度为5~20个字符",trigger:"change"}],content:[{required:!0,message:"请输入内容！",trigger:"blur"}],category:[{required:!0,message:"请选择类别！",trigger:"blur"}],cover:[{required:!0,message:"请上传封面！",trigger:"blur"}]}),w=e=>{f.cover=URL.createObjectURL(e),f.file=e},y=()=>{l.value.validate((async e=>{if(e){const e=new FormData;for(let a in f)e.append(a,f[a]);let l=await(0,i.w)("/new/add",e);200===l.code&&l.success?(a.push("/news-list"),(0,g.z8)({type:"success",message:l.message})):(0,g.z8)({type:"error",message:"发布失败"})}}))};return(e,a)=>{const c=n.Xh,i=o.EZ,p=t.nH,g=u.BT,_=u.km,W=r.mi,h=t.ly;return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(c,{icon:null,title:"新闻管理",content:"添加新闻"}),(0,s.Wm)(h,{ref_key:"ruleFormRef",ref:l,model:f,"status-icon":"",rules:b,"label-width":"85px",class:"ruleForm"},{default:(0,s.w5)((()=>[(0,s.Wm)(p,{label:"标题",prop:"title"},{default:(0,s.w5)((()=>[(0,s.Wm)(i,{modelValue:f.title,"onUpdate:modelValue":a[0]||(a[0]=e=>f.title=e),type:"text",placeholder:"请输入标题",autocomplete:"off"},null,8,["modelValue"])])),_:1}),(0,s.Wm)(p,{label:"内容",prop:"content"},{default:(0,s.w5)((()=>[(0,s.Wm)(m.Z,{modelValue:f.content,"onUpdate:modelValue":a[1]||(a[1]=e=>f.content=e)},null,8,["modelValue"])])),_:1}),(0,s.Wm)(p,{label:"类别",prop:"category"},{default:(0,s.w5)((()=>[(0,s.Wm)(_,{modelValue:f.category,"onUpdate:modelValue":a[2]||(a[2]=e=>f.category=e),placeholder:"请选择类别"},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(v,(e=>((0,s.wg)(),(0,s.j4)(g,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,s.Wm)(p,{label:"封面图片",prop:"cover"},{default:(0,s.w5)((()=>[(0,s.Wm)(d.Z,{avatar:f.cover,onUpload:w},null,8,["avatar"])])),_:1}),(0,s.Wm)(W,{type:"primary",onClick:y},{default:(0,s.w5)((()=>[(0,s.Uk)("添加新闻")])),_:1})])),_:1},8,["model","rules"])],64)}}}),v=a(89);const b=(0,v.Z)(f,[["__scopeId","data-v-e5e3682e"]]);var w=b}}]);
//# sourceMappingURL=837.a4c14f88.js.map